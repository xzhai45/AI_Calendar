{% extends "base.html" %}

{% load static %}
{% load i18n %}

{% block title %}Home | GT AI Calendar{% endblock title %}

{% block extra_css %}
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />

{% endblock %}

{% block content %}
    <div class="container mt-5 text-center">
        <h1>Welcome to GT AI Calendar</h1>
        <p>Your AI-powered scheduling assistant</p>
    </div>
    <pre>{{ events|safe }}</pre>


    {% if events %}
        <div class="container mt-5">
            <h3 class="mb-4">Your Upcoming Events</h3>
            <div id="calendar"></div>
        </div>
    {% else %}
        <p class="text-center mt-5">No events to display.</p>
        <div id="calendar"></div>
        
    {% endif %}
{% endblock %}

{% block extra_js %}
    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');
            if (calendarEl) {
                var calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: 'dayGridMonth',
                    height: 'auto',
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek,listWeek'
                    },
                    events: [
                        {% for event in events %}
                            {
                                title: "{{ event.summary|escapejs }}",
                                start: "{{ event.start.dateTime|default:event.start.date }}",
                                end: "{{ event.end.dateTime|default:event.end.date }}"
                            }{% if not forloop.last %},{% endif %}
                        {% endfor %}
                    ]
                });

                calendar.render();
            }
        });
    </script>
{% endblock %}
